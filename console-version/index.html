<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

        let playerSelection;
        let computerSelection;
        let playerScore;
        let computerScore;        

        function computerPlay(){
            let choice = Math.floor(Math.random()*3);
            switch(choice){
                case 1:
                    return "Rock";
                case 2:
                    return "Paper";
                default:
                    return "Scissors";
            }
        }
        
        function playRound(playerSelection, computerSelection){
            if(playerSelection === computerSelection){
                return "Draw! " + playerSelection + " ties " + computerSelection;
            } else if(playerSelection === "Rock" && computerSelection === "Scissors") {
                playerScore++;
                return "You win! " + playerSelection + " beats " + computerSelection;
            } else if(playerSelection === "Rock" && computerSelection === "Paper") {
                computerScore++;
                return "You lose! " + computerSelection + " beats " + playerSelection;
            } else if(playerSelection === "Paper" && computerSelection === "Rock") {
                playerScore++
                return "You win! " + playerSelection + " beats " + computerSelection;
            } else if(playerSelection === "Paper" && computerSelection === "Scissors") {
                computerScore++;
                return "You lose! " + computerSelection + " beats " + playerSelection;
            } else if(playerSelection === "Scissors" && computerSelection === "Paper") {
                playerScore++;
                return "You win! " + playerSelection + " beats " + computerSelection;
            } else if(playerSelection === "Scissors" && computerSelection === "Rock") {
                computerScore++;
                return "You lose! " + computerSelection + " beats " + playerSelection;
            }
        }
        //main function to start game
        function game(){
            playerScore = 0;
            computerScore = 0;
            for(let i = 0; i < 5; i++){
                playerSelection = playerInput();
                computerSelection = computerPlay();
                console.log(playRound(playerSelection, computerSelection));
            }
            console.log(chooseWinner(playerScore, computerScore));
        }

        // Display string with end of game winner and score
        function chooseWinner(playerScore, computerScore){
            if(playerScore === computerScore){
                return "Tie game! " + playerScore + "-" + computerScore;
            } else if(playerScore > computerScore){
                return "You win! " + playerScore + "-" + computerScore;
            } else {
                return "You lose! " + computerScore + "-" + playerScore;
            }
        }

        function playerInput(){
            let inputAccept = false;
            while(!inputAccept){   // obtain player choice and make sure it is valid
                    let move = prompt("Make your choice! (rock, paper or scissors)");
                    if(!move){
                        alert("No canceling!")
                        continue;
                    }
                    let moveLower = move.toLowerCase();
                    // return properly formatted move choice, or choose again if not valid
                    if(moveLower === "rock"){
                        return "Rock";
                    } else if(moveLower === "paper"){
                        return "Paper";
                    } else if(moveLower === "scissors"){
                        return "Scissors";
                    } else {
                        alert("Please make a valid move");
                    }
                }
        }

    </script>
</body>
</html>